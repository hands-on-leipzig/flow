# Font Change Documentation: Fixing π Character Encoding in PDFs

## Problem
The special character "π" (pi) in team names is converted to "?" in PDF output. This occurs because the default fonts used by DomPDF (Helvetica, Times-Roman, Courier) only support Windows ANSI encoding and do not include Greek characters.

## Solution
Switch from generic `sans-serif` (which maps to Helvetica) to **DejaVu Sans**, which is bundled with DomPDF and supports Unicode including Greek characters.

## Required Changes

### 1. DomPDF Configuration
**File:** `backend/config/dompdf.php`

**Change:**
```php
// Line 182: Change from
'default_font' => 'serif',
// To:
'default_font' => 'DejaVu Sans',
```

**Note:** If the config file doesn't exist in `backend/config/`, publish it first:
```bash
php artisan vendor:publish --provider="Barryvdh\DomPDF\ServiceProvider" --tag=config
```

### 2. Update All PDF Templates
Replace all instances of `font-family: sans-serif` with `font-family: 'DejaVu Sans', sans-serif` in the following files:

#### Layout Templates:
- `backend/resources/views/pdf/layout_landscape.blade.php` (2 instances: body, .footer-timestamp)
- `backend/resources/views/pdf/layout_portrait.blade.php` (2 instances: body, .footer-timestamp)

#### Content Templates:
- `backend/resources/views/pdf/match-plan.blade.php` (1 instance)
- `backend/resources/views/pdf/event-overview.blade.php` (1 instance - note: uses escaped quotes in PHP string)
- `backend/resources/views/pdf/plan_export.blade.php` (1 instance)
- `backend/resources/views/pdf/content/right_qr.blade.php` (6 instances)
- `backend/resources/views/pdf/content/team_schedule.blade.php` (1 instance)
- `backend/resources/views/pdf/content/role_schedule.blade.php` (1 instance)

**Total:** 15 instances across 8 files

### 3. Layout Adjustment Required
**Important:** DejaVu Sans has slightly different metrics than Helvetica:
- Characters are slightly taller/wider
- Line heights may need adjustment
- Table cell heights may need tweaking
- Overall spacing may need fine-tuning

**Areas to review after font change:**
- Header/footer spacing
- Table row heights
- Text wrapping in cells
- Multi-line text spacing
- Match plan boxes (if content overflows)
- Event overview grid (if cells become too tight)

### 4. Testing Checklist
After implementing changes, test:
- [ ] π character displays correctly in all PDF types
- [ ] Team schedule PDFs (single team, all teams)
- [ ] Role schedule PDFs (all roles)
- [ ] Room schedule PDFs
- [ ] Match plan PDF (Robot-Game)
- [ ] Event overview PDF
- [ ] QR code PDFs (plan_wifi, plan)
- [ ] All layouts fit on intended page count
- [ ] No text overflow or clipping
- [ ] Headers/footers remain properly positioned
- [ ] Table cells accommodate content without breaking layout

## Alternative Approaches (Not Recommended)
1. **Custom font embedding:** More complex, requires font file management
2. **Character transliteration:** Would convert π to "pi" in text, losing the original character
3. **Image substitution:** Overly complex for a single character issue

## Notes
- DejaVu Sans is visually similar to Helvetica but not identical
- The font change affects ALL PDFs generated by the system
- Font metrics differences may require layout adjustments across all templates
- Consider testing with various team names containing special characters (π, other Greek letters, accented characters)
